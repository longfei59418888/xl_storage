import{get as getCookie,set as setCookie,del as delCookie,clear as clearCookie}from"xl_cookie";const threeMonth=7776e3;let localStorageList={};if(localStorage){let e=localStorage.getItem("localStorageList_threeMonth");e&&Object.keys(JSON.parse(e)).forEach(e=>{get(e)})}export const set=(e,t,o=7776e3)=>{if(localStorage)return setCookie(e,t,o);-1!==o&&(o=(new Date).getTime()+1e3*o),t=t?JSON.stringify({data:t,timeOut:o}):null,localStorage.setItem(e,t),localStorageList[e]=1,localStorage.setItem("localStorageList_threeMonth",JSON.stringify(localStorageList))};export function get(e){if(localStorage)return getCookie(e);let t=localStorage.getItem(e);if(null==t||""==t)return null;return t=JSON.parse(t),(new Date).getTime()>t.timeOut&&-1!==t.timeOut?(remove(e),null):t.data};export function remove(e){if(localStorage)return delCookie(e);localStorage.removeItem(e),delete localStorageList[e],localStorage.setItem("localStorageList_threeMonth",JSON.stringify(localStorageList))};export const clear=()=>{if(localStorage)return clearCookie();localStorage.clear(),localStorageList={},localStorage.setItem("localStorageList_threeMonth",JSON.stringify(localStorageList))};function Storage(e){this.prefixName=`${e}_module`;let t=get(this.prefixName);this.list=t||{},this.refresh(),Object.keys(this.list).forEach(e=>{this.get(e)||delete this.list[e]}),this.refresh()}Storage.prototype={refresh:function(){set(this.prefixName,this.list)},get:function(e){return get(`${this.prefixName}_${e}`)},set:function(e,t,o=-1){e=`${this.prefixName}_${e}`,set(e,t,o),this.list[e]=1,this.refresh()},remove:function(e){remove(e=`${this.prefixName}_${e}`),delete this.list[e],this.refresh()},clear:function(){Object.keys(this.list).forEach(e=>{remove(e)}),this.list={},this.refresh()}};export default Storage;